@model IEnumerable<QLBanHang.Models.ViewModel>

<h2>Chi tiết hóa đơn</h2>

<p>
    @foreach (var m in ViewBag.Main)
            {
                <p><b>Số hóa đơn: @m.hoadon.MaHD</b></p>
                <p><b>Khách hàng: @m.khachhang.TenKH</b></p>
            }
</p>
<table class="table">
    <tr>
        <th>Số TT</th>
        <th>
            Tên sản phẩm
        </th>
        <th>
            Đơn vị tính
        </th>
        <th>
            Số lượng
        </th>
        <th>
            Đơn giá
        </th>
        <th>
            Thành tiền
        </th>
        <th></th>  
    </tr>
    @{ 
        int i = 0;
        double tongtien = 0;
    }
    @foreach(var item in ViewBag.Sub)
    {
        i++;
        tongtien += item.Thanhtien;
        <tr>
            <td>
                @i
            </td>
            <td>
                @item.sanpham.TenSP
            </td>
            <td>
                @item.sanpham.Donvitinh
            </td>
            <td>
                @item.cthd.Soluong
            </td>
            <td>
                @String.Format("{0:0, ###}", item.cthd.DongiaBan)
            </td>
            <td>
                @String.Format("{0:0, ###}", item.Thanhtien)
            </td>
        </tr>
    }
    <tr>
        <th colspan="5" align="right">Tổng tiền</th>
        <th>@String.Format("{0:0, ###}",tongtien)</th>
    </tr>

</table>
